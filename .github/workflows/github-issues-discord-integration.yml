name: GitHub Issues Integration

on:
  workflow_call:

jobs:
  log_issue_details:
    runs-on: ubuntu-latest
    env:
      ISSUE_JSON: ${{ toJSON(github.event.issue) }}
    steps:
      - name: Echo key issue fields (quick)
        run: |
          echo "Issue Title:   ${{ github.event.issue.title }}
          echo "Issue State:   ${{ github.event.issue.state }}
          echo "Issue URL:     ${{ github.event.issue.html_url }}
          echo ""
          echo "--------------------------------"
          echo ""
          echo "Total Issue Details: ${{ ISSUE_JSON }}"

      - name: Echo labels and assignees (via event JSON)
        env:
          EVENT_PATH: ${{ github.event_path }}
        run: |
          echo "Event payload path: $EVENT_PATH"
          echo ""
          echo "Labels:"
          jq -r '.issue.labels[]?.name' "$EVENT_PATH" | sed 's/^/  • /' || true
          echo ""
          echo "Assignees:"
          jq -r '.issue.assignees[]?.login' "$EVENT_PATH" | sed 's/^/  • /' || true
          echo ""
          echo "Milestone:"
          jq -r '.issue.milestone?.title // ""' "$EVENT_PATH"
