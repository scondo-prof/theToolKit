name: GitHub Issues Integration

on:
  workflow_call:

jobs:
  log_issue_details:
    runs-on: ubuntu-latest
    steps:
      - name: Echo key issue fields (quick)
        run: |
          echo "Action:        ${{ github_action }}"
          echo "Repo:          ${{ github_repo }}"
          echo "Issue number:  ${{ github_issue_number }}"
          echo "Issue Title:   ${{ github.event.issue.title }}
          echo "Issue State:   ${{ github.event.issue.state }}

      - name: Echo labels and assignees (via event JSON)
        env:
          EVENT_PATH: ${{ github.event_path }}
        run: |
          echo "Event payload path: $EVENT_PATH"
          echo ""
          echo "Labels:"
          jq -r '.issue.labels[]?.name' "$EVENT_PATH" | sed 's/^/  • /' || true
          echo ""
          echo "Assignees:"
          jq -r '.issue.assignees[]?.login' "$EVENT_PATH" | sed 's/^/  • /' || true
          echo ""
          echo "Milestone:"
          jq -r '.issue.milestone?.title // ""' "$EVENT_PATH"
